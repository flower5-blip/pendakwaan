# Netlify Configuration for Next.js App
# PERKESO Prosecution Paper Builder

[build]
  base = "app"
  # Clear cache sebelum build untuk elak masalah cache corrupt
  command = "rm -rf .next/cache && npm run build"
  publish = ".next"

# Next.js Plugin for Netlify
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Environment variables
[build.environment]
  NODE_VERSION = "20"
  # Optimize Next.js build
  NEXT_TELEMETRY_DISABLED = "1"

# Headers untuk performance
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"

# Redirects for SPA routing (Next.js handle sendiri)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false
